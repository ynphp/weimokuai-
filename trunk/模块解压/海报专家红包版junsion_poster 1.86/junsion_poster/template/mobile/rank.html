<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8">
		<meta name='viewport' content='width=device-width, initial-scale=1.0, maximum-scale=1.0' />
		<title>{$_W['account']['name']}</title>
		<script type="text/javascript" src="../addons/junsion_poster/template/js/jquery-1.7.2.min.js"></script>
		<script type="text/javascript" src="../addons/junsion_poster/template/js/sweetalert.min.js"></script>
		<link rel="stylesheet" href="../addons/junsion_poster/template/js/sweetalert.css?i={TIMESTAMP}">
		<style>
			body, div, dl, dt, dd, ul, ol, li, h1, h2, h3, h4, h5, h6, pre, form, fieldset, input, textarea, p, blockquote, th, td{ margin: 0; padding: 0; }
			table { border-collapse: collapse; border-spacing: 0; }
			fieldset, img { border: 0 }
			address, caption, cite, code, dfn, em, th, var { font-style: normal; font-weight: normal }
			strong{ font-style: normal;}
			th{font-weight:bold;}
			input{ outline:0;}
			ol, ul { list-style: none }
			h1, h2, h3, h4, h5, h6 { font-size: 100%; font-weight: normal }
			q:before, q:after { content: '' }
			abbr, acronym { border: 0 }
			a { text-decoration: none;color:#666666;outline:none;cursor: pointer;}
			.none{ display: none;}
			a:active,a:hover,a:visited{border:none; color: #666;}
			html{*overflow:auto;}
			textarea{resize:none;}
			select{-webkit-appearance: none;}
			body{ font:12px/1.5 tahoma,arial,"微软雅黑"; width:100%; min-width:320px; background: #f0f0f0;}
			.rankTop{ width: 100%; height: auto; overflow: hidden; padding: 20px 0px 10px; position: relative; z-index: 10;}
			.rankTopC{ width: 100%; height: auto; overflow: hidden; text-align: center;}
			.rankTopC dt{ width: 100%; height: auto; overflow: hidden;}
			.rankTopC dt span{ width: 80px; height: 80px; display: inline-block; overflow: hidden; border-radius: 50%; -webkit-border-radius: 50%;}
			.rankTopC dt img{ width: 100%; height: 100%; display: block;}
			.rankTopC dd{ width: 100%; height: 24px; line-height: 24px; overflow: hidden; color: #909090;}
			.rankTopC dd span.name{ color: #323232; font-size: 14px;}
			.rankTopL-pa{ position: absolute; z-index: 20; top: 30px;}
			.rankTopL{ left: 10%;}
			.rankTopR{ right: 5%;}
			.rankTopL-pa{ width: 60px; height: auto; overflow: hidden; text-align: center;}
			.rankTopL-pa dt{ width: 100%; height: 44px;overflow: hidden;}
			.rankTopL-pa dt span{ font-size: 34px; color: #f9820c;}
			#main{ width: 100%; height: auto; overflow: hidden; }
			.rankMenu{ width: 100%; height: auto; overflow: hidden;margin-bottom: 5px}
			.rankMenu nav{ font-size: 14px;width: 100%; height: auto; display: box; display: -webkit-box;}
			.rankMenu nav a{ width: 100%; height: 44px; line-height: 44px; color: #323232; text-align: center; border-right: 2px solid #fff; display: block; box-flex:1; -webkit-box-flex:1; background: #cacaca;}
			.rankMenu nav a:last-child{ border-right: 0;}
			.rankMenu nav a.current{ background: #fff; color: #f9820c;}
			.rankMenu nav span{ display: inline-block;}
			.rankMenu nav img{ width: 25px;height:28px; line-height: 28px; display:block; float: left; margin:8px 5px 0px 0px;}
			.IntegralRank{ width: 100%; height: auto; overflow: hidden; position: relative; z-index: 10;}
			.IntegralRank li{ width: 100%; height: auto; overflow: hidden; padding: 8px 0px; border-bottom: 1px dashed #b2b2b2;}
			.IntegralRank span.ranking{ font-size: 15px;float: left; height: 40px; line-height: 40px; display: block; color: #646464; margin-left: 10px;}
			.IntegralRank span.userImg{ margin: 0px 10px; width: 40px; height: 40px; display: block; border-radius: 50%; -webkit-border-radius: 50%; overflow: hidden; float: left;}
			.IntegralRank span.userImg img{ width: 100%; height: 100%; display: block;}
			.IntegralRank span.userName{ max-width: 60%;font-size: 15px;float: left; height: 40px; line-height: 40px; display: block; color: #000;}
			.IntegralRank span.userIntegral{ font-size: 18px;float: right; height: 40px; line-height: 40px; display: block; color: #f9820c; margin-right: 10px;}
			.IntegralRank li.first{ width: 100%; height: auto; overflow: hidden; text-align: center;}
			.IntegralRank li.first span.ranking{ float: none; width: 100%; height: 24px; line-height: 24px; font-size: 14px; display: block; margin: 0px auto; overflow: hidden; color: #f94f0c;}
			.IntegralRank li.first span.userImg{ float: none; width: 80px; height: 80px; display: block; margin: 0px auto; overflow: hidden; border-radius: 50%; -webkit-border-radius: 50%; }
			.IntegralRank li.first span.userName{ float: none; width: 100%; height: 20px; line-height: 20px;display: block; margin: 0px auto; overflow: hidden; color: #323232;}
			.IntegralRank li.first span.userIntegral{ float: none; width: 100%; height: 24px; line-height: 24px;display: block; font-size: 18px; margin: 0px auto; overflow: hidden; color: #f94f0c;}
			.IntegralRank li.second{ width: 33.3%; height: auto; overflow: hidden; text-align: center; position: absolute; z-index: 20; top: 0px; left: 0px; border-bottom: 0;}
			.IntegralRank li.second span.ranking{ float: none; width: 100%; height: 24px; line-height: 24px; font-size: 14px; display: block; margin: 0px auto; overflow: hidden; color: #f9820c;}
			.IntegralRank li.second span.userImg{ float: none; width: 70px; height: 70px; display: block; margin: 5px auto; overflow: hidden; border-radius: 50%; -webkit-border-radius: 50%; }
			.IntegralRank li.second span.userName{ float: none; width: 100%; height: 20px; line-height: 20px;display: block; margin: 0px auto; overflow: hidden; color: #323232;}
			.IntegralRank li.second span.userIntegral{ float: none; width: 100%; height: 24px; line-height: 24px;display: block; font-size: 18px; margin: 0px auto; overflow: hidden; color: #f9820c;}
			.IntegralRank li.third{ width: 33.3%; height: auto; overflow: hidden; text-align: center; position: absolute; z-index: 20; top: 0px; right: 0px; border-bottom: 0;}
			.IntegralRank li.third span.ranking{ float: none; width: 100%; height: 24px; line-height: 24px; font-size: 14px; display: block; margin: 0px auto; overflow: hidden; color: #f9820c;}
			.IntegralRank li.third span.userImg{ float: none; width: 60px; height: 60px; display: block; margin: 10px auto; overflow: hidden; border-radius: 50%; -webkit-border-radius: 50%; }
			.IntegralRank li.third span.userName{ float: none; width: 100%; height: 20px; line-height: 20px;display: block; margin: 0px auto; overflow: hidden; color: #323232;}
			.IntegralRank li.third span.userIntegral{ float: none; width: 100%; height: 24px; line-height: 24px;display: block; font-size: 18px; margin: 0px auto; overflow: hidden; color: #f9820c;}
			
			th{
				padding: 5px 0;
			}
			td{
				padding: 5px 0;
			}
			.ftitle span{
				  width: 49%;
				  display: inline-block;
				  text-align: center;
				  background-color: orange;
				  color: white;
				  padding: 5px 0;
				  font-size: 15px;
				  border-radius: 5px;
				  margin: 0 0.5%;
			}
			.ftitle span.current{
				background-color: orangered;
			}
			.with{
				  border: 1px solid gainsboro;
				  border-radius: 5px;
				  background: orangered;
				  color: white;
				  padding: 4px 10px;
				  font-size: 12px;
				  margin-top: 3px;
			}
		</style>
	</head>
	<body>
		<!--top-->
		<div class="rankTop">
			<dl class="rankTopC">
				<dt>
					<span><img src="{$fans['avatar']}" /></span>
				</dt>
				<dd><span class="name">{$fans['nickname']}</span></dd>
				{if $ranks}<dd><span style="color: orangered;font-size: 15px;">第{$ranks}名</span></dd>{/if}
				<dd>关注时间：<span class="timer">{if $fans['follow']}{php echo date('Y-m-d H:i:s',$fans['followtime'])}{else}未关注{/if}</span></dd>
			</dl>
			<dl class="rankTopL rankTopL-pa" onclick="onFans()">
				<dt><span>{$count}</span></dt>
				<dd>好友</dd>
			</dl>
			<dl class="rankTopR rankTopL-pa" style="width: auto">
				<dt><span>{php echo number_format($credit,$poster['credit']!=0?2:0)}</span></dt>
				<dd>{$creditname}</dd>
			</dl>
		</div>
		<!--top end-->
		<!--main-->
		<main id="main">
			<!--menu-->
			<div class="rankMenu">
				<nav>
					<a href="javascript:void(0)" onclick="turnImg(1)"><span><img id="my" style="width: 28px;" src="../addons/junsion_poster/template/images/money.png" />我的{$creditname}</span></a>
					{if $poster['credit']==2}<a onclick="turnImg(4)"><span><img id="red" src="../addons/junsion_poster/template/images/gift.png" />提现记录</span></a>{else}<a {if $poster['doneurl']}href="{$poster['doneurl']}"{/if} {if $poster['doneurl'] == -1}style="display:none;"{/if} onclick="turnImg(4)"><span><img id="red" src="../addons/junsion_poster/template/images/gift.png" />兑换中心</span></a>{/if}
					<a href="javascript:void(0)" onclick="turnImg(2)" class="current"><span><img id="rank" src="../addons/junsion_poster/template/images/rankingp.png" />{if $poster['grouptips']}推广{else}{$creditname}{/if}排行</span></a>
				</nav>
			</div>
			<!--menu end-->
			<!--box-->
			<div class="rank_box" style="background: #fff;">
				<!--我的{$creditname}-->
				<div class="rankTabs">
					<table style="width: 100%;text-align: center;font-size: 14px;" border="1">
						<tr style="background: #aaa">
							<th>{$creditname}来源</th>
							<th>{$creditname}</th>
							<th>时间</th>
						</tr>
						{loop $records $r}
						<tr>
							<td>{$r['remark']}</td>
							<td>{php echo number_format($r['num'],$poster['credit']!=0?2:0)}</td>
							<td>{php echo date('Y-m-d H:i:s',$r['createtime'])}</td>
						</tr>
						{/loop}
					</table>
				</div>
				{if $poster['credit'] == 2}
				<div class="rankTabs">
					<table style="width: 100%;text-align: center;font-size: 14px;" border="1">
						<tr style="background: #aaa">
							<th>金额</th>
							<th>状态</th>
							<th>时间</th>
						</tr>
						{loop $logs $l}
						<tr>
							<td>{$l['redscore']}</td>
							<td>{if $l['status']}已提现{else}提现中{/if}</td>
							<td>{php echo date('Y-m-d H:i:s',$l['createtime'])}</td>
						</tr>
						{/loop}
					</table>
				</div>
				{elseif empty($poster['doneurl'])}
				<div class="rankTabs">
				{template 'goods'}
				</div>
				{else}
				<div class="rankTabs">
				</div>
				{/if}
				<!--{$creditname}排行-->
				<div class="rankTabs">
					<div class="IntegralRank">
						<ul>
						{loop $shares $k $s}
							<li {if $k==0}class="first"{elseif $k==1}class="second"{elseif $k==2}class="third"{/if}>
								{if $k>=3}<span class="ranking">#{php echo $k+1}</span>{/if}
								<span class="userImg">
									<img src="{$s['avatar']}" />
								</span>
								{if $k<3}<span class="ranking">{if $k==0}第一名{elseif $k==1}第二名{elseif $k==2}第三名{/if}</span>{/if}
								<span class="userName">{$s['nickname']}</span>
								<span class="userIntegral">{php echo number_format($s[$credittype],$poster['credit']!=0?2:0)}</span>
							</li>
						{/loop}
						</ul>
					</div>
				</div>
				<!--{$creditname}排行 end-->
				<div class="rankTabs">
					<div class="ftitle"><span class="current" {if $count>0}onclick="fans(this)"{/if}>一级好友({$count})</span><span {if $count2>0}onclick="fans(this)"{/if}>二级好友({$count2})</span></div>
					<div class="IntegralRank fans">
						<ul id="fans">
							</ul>
					</div>
					<div class="IntegralRank fans" style="display: none;">
						<ul id="fans2">
							</ul>
					</div>
				</div>
			</div>
			<!--box end-->
		</main>
		<!--main end-->
		<div style="text-align: center;font-size: 15px;margin-top: 10px;">{$poster['copyright']}</div>
	</body>
	<script>
		function fans(obj){
			$(obj).addClass("current").siblings().removeClass("current");
			var i = $(obj).index();
			$(".fans").hide();
			$(".fans").eq(i).show();
			getFans(i);
		}
		
		function onFans(){
			turnImg(3);
			$(".rankMenu a").removeClass("current");
			getFans(0);
			$(".rank_box .rankTabs").eq(3).show().siblings().hide();
		}
		
		var fan = 1,fan2 = 1;
		function getFans(level){
			if(fan == 1 && level == 0 || fan2 == 1 && level == 1){
				$.ajax({
					url:'{php echo $this->createMobileUrl("mfan",array("pid"=>$pid,"uid"=>$fans["uid"]))}',
					type:'post',
					data:{level:level},
					success:function(data){
						data = JSON.parse(data);
						if(fan == 1) fan = data;
						else if(fan2 == 1) fan2 = data;
						listFans(level);
					}
				});
			}
		}
		
		function listFans(level){
			var obj = $('#fans');
			var data = fan;
			if(level == 1){
				obj = $('#fans2');
				data = fan2;
			}
			for(var i = 0; i < data.length; i++){
				var str = '<li><span class="userImg"><img src="'+data[i]['avatar']+'"/></span>';
				str += '<span class="userName">'+data[i]['nickname']+'</span>';
				str += '<span class="userIntegral">'+data[i]['credit']+'</span></li>';
				obj.append(str);
			}
		}
	
		$(function(){
			$(".rank_box .rankTabs").hide();
			$(".rank_box .rankTabs").eq(2).show();
			$(".rankMenu a").click(function(){
				$(this).addClass("current").siblings().removeClass("current");
				var i = $(this).index();
				{if $poster['doneurl'] && $poster['doneurl'] != -1}if(i == 1)return;{/if}
				$(".rank_box .rankTabs").eq(i).show().siblings().hide();
			})
		});
		
		function turnImg(index){
			if(index == 1){
				$('#my').attr('src','../addons/junsion_poster/template/images/moneyo.png');
				$('#rank').attr('src','../addons/junsion_poster/template/images/ranking.png');
				$('#red').attr('src','../addons/junsion_poster/template/images/gift.png');
			}else if(index == 2){
				$('#my').attr('src','../addons/junsion_poster/template/images/money.png');
				$('#rank').attr('src','../addons/junsion_poster/template/images/rankingp.png');
				$('#red').attr('src','../addons/junsion_poster/template/images/gift.png');
			}else if(index == 4){
				$('#my').attr('src','../addons/junsion_poster/template/images/money.png');
				$('#rank').attr('src','../addons/junsion_poster/template/images/ranking.png');
				$('#red').attr('src','../addons/junsion_poster/template/images/gifto.png');
			}else{
				$('#my').attr('src','../addons/junsion_poster/template/images/money.png');
				$('#rank').attr('src','../addons/junsion_poster/template/images/ranking.png');
				$('#red').attr('src','../addons/junsion_poster/template/images/gift.png');
			}
		}
	</script>
{template 'share'}
</html>
