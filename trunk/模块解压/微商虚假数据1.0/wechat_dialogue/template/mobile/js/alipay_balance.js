$(function(){$("#save").click(function(){var a=$(this),b=$("#iphone").clone(),c=$(".my-image"),d=$(".mask");c.length||(c=$('<div class="my-image">成功生成图片，<a class="my-image-view" href="#">现在就查看</a> 或 <a class="my-image-continue" href="#">继续制作</a></div>'),$("body").append(c)),d.length||$("body").append('<div class="mask"></div>'),b.prop("id","iphonePreview"),b.css({position:"relative"}),a.hide(),$("body").append(b),$(".loading").show(),$(".my-image,.mask").hide(),html2canvas(b,{onrendered:function(b){var c=b.toDataURL("image/png");$.post("/index.php/Home/Tools/upload",{data:c,type:6},function(b){b.status?($(".my-image a.my-image-view").attr("href",b.data.url),$(".my-image,.mask").show()):alert(b.data),$(".loading").hide(),a.show(),$("#iphonePreview").remove()})}})})});