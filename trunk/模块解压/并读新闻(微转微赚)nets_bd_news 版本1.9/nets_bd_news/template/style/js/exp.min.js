/* wap-complete - 0.1.0 - 20150827163932 */
if("undefined"==typeof template)var template={};var Exp=function($,template){var cache={cssSupport:{}},Sys={},ua=navigator.userAgent.toLowerCase(),s;(s=ua.match(/msie ([\d.]+)/))?Sys.ie=s[1]:(s=ua.match(/firefox\/([\d.]+)/))?Sys.firefox=s[1]:(s=ua.match(/chrome\/([\d.]+)/))?Sys.chrome=s[1]:(s=ua.match(/opera.([\d.]+)/))?Sys.opera=s[1]:(s=ua.match(/version\/([\d.]+).*safari/))?Sys.safari=s[1]:0,Sys.ios=ua.match(/\(i[^;]+;( u;)? cpu.+mac os x/);var Exp={mobile:!!navigator.userAgent.match(/(phone|pad|pod|iPhone|iPod|ios|iPad|Android|Mobile|BlackBerry|IEMobile|MQQBrowser|JUC|Fennec|wOSBrowser|BrowserNG|WebOS|Symbian|Windows Phone)/i),addDefaultsEvents:function(a){function b(){return!1}for(var c=this.mobile,d=["mousewheel","DOMMouseScroll",c?"touchstart":"mousedown",c?"touchmove":"mousemove",c?"touchend":"mouseup"],e=d.length;e--;)a.on(d[e],b)},cssSupports:function(){var a=cache.cssSupport;return function(b){var c=document.createElement("div"),d="khtml o moz webkit".split(" "),e=d.length,f=!1;if(b=b.replace(/-[\w]/g,function(a){return a.toUpperCase().substring(1)}),b in a)return a[b];if("-ms-"+b in c.style)f="-ms-"+b;else for(b=b.replace(/^[a-z]/,function(a){return a.toUpperCase()});e-=1;)d[e]+b in c.style&&(f=d[e]+b);return a[b]=f}}(),css:function(a,b,c){var d=document.defaultView.getComputedStyle,e=this.cssSupports(b);if(void 0===c)return a.length&&(a=a[0]),a&&a.style[e]||a&&d(a,"").getPropertyValue(b);if(a.length)for(var f=0;f<a.length;f++)a[f].style[e]=c;else a.style&&(a.style[e]=c)},css3:function(a,b){var c=/\((?:[\s,]*([-\d\.]+)[px\s]*)?(?:[\s,]*([-\d\.]+)[px\s]*)?(?:[\s,]*([-\d\.]+)[px\s]*)?/g,d=c.exec(Exp.css(a,b));return d&&d.shift(),d},HTMLTemplate:function(opts){function handleSanmuExpression(html){var expression=/\&{.*?[<>=]?(.*?["']?:["']?.*?["']?)}/g,results=html.match(expression);if(results&&results.length>0)for(var i=results.length,result,sanmuStr="";i--;){result=results[i],result&&(sanmuStr=result.replace(/^\&{/,"").replace(/}$/,""));try{html=html.replace(result,eval(sanmuStr))}catch(e){}}return html}var o=opts.param||{},html=[opts.string].join("").replace(/[\f\n\r\t\v]+/gi,"");if(o){for(var i in o){var re=new RegExp("&\\{"+i+"\\}","g");html=html.replace(re,o[i])}return html=handleSanmuExpression(html)}return html=handleSanmuExpression(html)},Class:function(){function a(){this.init&&this.init()}function b(a,b){return i[a]=b,g[a]=b}function c(a,b){for(var c in b)a[c]=b[c];return a}function d(){}function e(){for(var a=this._super.caller,b=a._methodName,c=this.constructor[h],d="__called_flag__";c=c[h];){var e=c[b];if(e&&!c[d]){c[d]=!0,e.apply(this,arguments),delete c[d];break}}}function f(a,g,i){function j(){var a=this.init;a&&a.apply(this,arguments)}b(a,j);if(i||(i=g,g=null),g&&(g.inherit&&c(j,this),c(j,g)),j.extend=f,d.prototype=this.prototype,j.prototype=new d,j.prototype.constructor=j,j.include=function(a){c(this.prototype,a)},i){var k,l=j.prototype;for(var m in i)k=i[m],k._methodName=m,l[m]=k;l._super=e,l.include=function(a){c(this,a)},i[h]=this[h],j[h]=i}return j.init&&j.init(),j}var g=window,h="__prototype__",i={};return a.extend=f,a.get=function(a){return i[a]},a}(),extend:function(a,b,c){var d=Object.prototype.toString,e="[object Array]";a=a||{};for(var f in b)c===!0&&b.hasOwnProperty(f)&&"object"==typeof b[f]?(a[f]||(a[f]=d.call(b[f])===e?[]:{}),arguments.callee(a[f],b[f],c)):a[f]=b[f];return a},getTop:function(a,b){var c=0;if(null!=a.offsetParent){c=a.offsetTop;var d=a.offsetParent;b?c+=arguments.callee(a.offsetParent):-1=="relative absolute fixed".indexOf(d.style.position)&&(c+=arguments.callee(a.offsetParent))}else null!=a.offsetParent;return c},getLeft:function(a,b){var c=0;if(null!=a.offsetParent){c=a.offsetLeft;var d=a.offsetParent;b?c+=arguments.callee(a.offsetParent):-1=="relative absolute fixed".indexOf(d.style.position)&&(c+=arguments.callee(a.offsetParent))}return c},getVersion:function(){return Sys},checkDevice:{isMobile:function(){return navigator.userAgent.match(/Win/i)||navigator.userAgent.match(/MacIntel/i)||navigator.userAgent.match(/Linux/i)?!1:!0}},position:{getHeight:function(){var a=document.documentElement.offsetHeight||document.body.offsetHeight;return a},scrollTop:function(){return document.documentElement.scrollTop||document.body.scrollTop},scrollHeight:function(){return document.documentElement.scrollHeight||document.body.scrollHeight},clientHeight:function(){return document.documentElement.clientHeight||document.body.clientHeight}},remove:function(){return this.parentNode?void this.parentNode.removeChild(this):void 0},buttonChange:function(a){function b(){g.valide({hide:!0,notRemote:!0})?(c.removeClass(e).addClass(d),j&&j(!0)):(c.removeClass(d).addClass(e),j&&j(!1))}var a=a||{},c=a.button,d=a.notClass,e=a.yesClass,f=(a.inputsId,a.valideId,a.errorClass,a.checkbox),g=a.valideEl,h=a.lisenerParent,i=!1,j=a.callBack,k=a.clickCallback;$(h||window).on("input",function(){f&&f.element.hasClass(f.uncheckClass)||b()}),k&&Exp.click(c,function(){g.valide()?(c.removeClass(e).addClass(d),k&&k(!0)):(c.removeClass(d).addClass(e),k&&k(!1))}),f&&Exp.click(f.element,function(){var a=$(this);a.hasClass(a.uncheckClass)?(i=!0,a.removeClass(a.uncheckClass)):(i=!1,a.addClass(a.uncheckClass)),changeState()}),b()},pageList:function(a){var b,c,d=a.root,e=a.pages,f=0,g=a.minInterval||500,h=new Date;a.currentIndex=a.currentIndex||0;var i=a.slidePageBtns;e.each(function(b,c){var f=(i.eq(b),e.eq(b));f.on("transitionend",function(c){a.transitionEndCall&&a.transitionEndCall({target:f,root:d,pages:e,index:b,elapsedTime:c.elapsedTime,propertyName:c.propertyName,type:"transitionend"})})}),i.each(function(j,k){var l=i.eq(j),m=e.eq(j);l.on("mousedown touchstart",function(c){if(new Date-h<g)return f=0,!1;h=new Date,f=1;var i=c.touches?c.touches[0]:c;b={x:i.clientX,y:i.clientY},a.touchStartCall&&a.touchStartCall({start:b,target:c.target,curPage:m,root:d,pages:e,index:j,type:"touchstart"});var k=c.srcElement||c.target;"A"!==k.tagName.toUpperCase()&&c.preventDefault()}).on("mousemove touchmove",function(c){if(!(0==f||f>2)){var g=!1,h=c.touches?c.touches[0]:c,i={x:h.clientX,y:h.clientY},k=i.y-b.y,l=i.x-b.x;k>=0&&0==j&&!g||0>=k&&j==e.length-1&&!g||(1==f&&(f=2,g=!0),2==f&&(k||l)&&a.touchMoveCall&&a.touchMoveCall({start:b,move:i,target:c.target,curPage:m,root:d,pages:e,index:j,type:"touchmove",first:g}),c.preventDefault())}}).on("mouseup touchend",function(g){if(0!=f){f=3;var h=g.changedTouches?g.changedTouches[0]:g;c={x:h.clientX,y:h.clientY};var i=c.y-b.y,k=c.x-b.x;if(i>=0&&0==j)return void((i||k)&&a.firstPageEndCall&&a.firstPageEndCall({start:b,move:c,target:g.target,curPage:m,root:d,pages:e,index:j,type:"touchend"}));if(0>=i&&j==e.length-1)return void((i||k)&&a.lastPageEndCall&&a.lastPageEndCall({start:b,move:c,target:g.target,curPage:m,root:d,pages:e,index:j,type:"touchend"}));(i||k)&&a.touchEndCall&&a.touchEndCall({start:b,move:c,target:g.target,curPage:m,root:d,pages:e,index:j,type:"touchend"}),g.preventDefault()}})})},alertBox:function(){function a(a){return a.preventDefault(),!1}function b(a){this.opts=a||{},this.title=this.opts.title||"",this.msg=this.opts.msg||"",this.type=this.opts.type||"default",this.hasMask=this.opts.hasMask===!1?!1:!0,this.confirm=this.opts.confirm||function(){},this.cancel=this.opts.cancel||function(){};var b=this.opts.callBack,c=this;this.callBack=function(){b&&b.call(c),Exp.clickActive($(c.el))},this._event=Exp.checkDevice.isMobile()?"tap":"click",a.animate||a.animate===!1||(a.animate="alert-box-anim"),a.bgAnimate||a.bgAnimate===!1||(a.bgAnimate="alert-bg-anim"),this.animate=a.animate,this.bgAnimate=a.bgAnimate,this.scrollerClass=a.scrollerClass,this.survivePeriod=a.survivePeriod||!1,this.createTime=new Date,this.delayRender=a.delayRender===!1||a.delayRender?a.delayRender:!0,this.upOffset=a.upOffset||0,this.resetCallback=a.resetCallback,this.asyncResetCallback=a.asyncResetCallback,this.background=a.background,this.bgClickReset=a.bgClickReset}return b.prototype={init:function(){var a=this;switch(a.type){case"default":var b='<div class="alert-box"><div class="msg">&{msg}</div><div class="wbox"><div class="wbox-col-a btn-b btn-cancel mr20"><a href="#">取消</a></div><div class="wbox-col-a btn-c btn-confirm"><a href="#">确定</a></div></div></div>';break;case"alert":var b='<div class="alert-box"><div class="msg">&{msg}</div><div class="layout wbox"><div class="wbox-col-a btn-c btn-confirm"><a href="#">确定</a></div></div></div>';break;case"validate":var b='<div class="alert-box alert-box-valide"><div class="msg">&{msg}</div></div>';break;case"custom":var b=this.opts.html}var c=Exp.HTMLTemplate({string:b,param:{msg:a.msg}});return a.delayRender?setTimeout(function(){a.render(c)},50):a.render(c),"validate"==a.type&&a.opts.autoCancel&&setTimeout(function(){a.cancel&&a.cancel(),a.reset()},1500),this},render:function(b){function c(){f.setMaskPos(),f.opts.setPos?f.opts.setPos.call(f):f.setPos()}function d(a){m=a.touches[0].clientY}function e(a){var b=l.height(),c=l[0].scrollTop,d=l[0].scrollHeight,e=a.touches[0].clientY,f=m-e;return c>=0&&d>c+b&&f>0?a.stopPropagation():c>0&&d>=c+b&&0>f?a.stopPropagation():a.preventDefault(),!1}var f=this,g=document.body;if(this.opts.contextAnimate){var h=$(g),i=h.find(".alert-context"),j=h.children(":not(.alert-context):not(script)");i.length||(i=$('<section class="alert-context"></section>').appendTo(h)),i.append(j),this.context=i}g.insertAdjacentHTML("beforeend",b);var k=f.el=f.get(".alert-box");if(f.hasMask&&f.mask(g),this.setPosProxy=c,f.animate&&k.setAttribute("class",(k.getAttribute("class")||"")+" "+f.animate),f.context&&f.context.addClass("alert-back-in"),f.opts.renderTime?setTimeout(function(){"function"==typeof f.callBack&&f.callBack(),$(window).on("resize",c),c()},f.opts.renderTime):"function"==typeof f.callBack&&(f.callBack(),$(window).on("resize",c)),c(),f.addEvent(),document.addEventListener("touchmove",a),this.scrollerClass){var l=$("."+this.scrollerClass);l[0].addEventListener("touchstart",d),l[0].addEventListener("touchmove",e);var m}},mask:function(a){var b=this,c=document.createElement("div");c.setAttribute("class","alert-box-bg alert-box-bg-"+b.type+(this.opts&&this.opts.rootClass?" "+this.opts.rootClass+"-bg":"")),this.bg=c,this.background!==!1&&(a.appendChild(c),this.setMaskPos(),b.bgAnimate&&c.setAttribute("class",(c.getAttribute("class")||"")+" "+b.bgAnimate),this.bgClickReset!==!1&&Exp.click($(b.bg),function(){$(b.bg).hasClass("alert-box-bg-validate")||b.reset()}))},setMaskPos:function(){var a=Exp.position.scrollHeight();this.bg.style.cssText+=";height:"+a+"px;width:"+document.documentElement.scrollWidth+"px;"},setPos:function(){var a=this,b=a.el,c=a.bg,d=Exp.position.scrollTop();b.style.cssText+=";top:"+(d+window.innerHeight/2-b.offsetHeight/2-this.upOffset)+"px;left:"+(document.documentElement.offsetWidth/2-b.offsetWidth/2)+"px;","mini"==a.type&&(c.style.opacity=0,setTimeout(function(){c.fadeOut(500,function(){$(this).remove()}),c.fadeOut(500,function(){$(this).remove()})},2e3))},addEvent:function(){var a=this,b=a.el;$(b.querySelector(".btn-confirm")).on(a._event,function(c){a.confirm(b),a.reset(),c.preventDefault()}),"alert"!=a.type&&$(b.querySelector(".btn-cancel")).on(a._event,function(c){a.cancel(b),a.reset(),c.preventDefault()})},reset:function(){if(!(this.survivePeriod&&new Date-this.createTime<this.survivePeriod)){var a=this,b=a.context;a.context=null,setTimeout(function(){var c=a.el,d=a.bg,e=$(c),f=$(d),g=a.opts;e.removeClass(g.animate).addClass(g.animateOut||"alert-box-anim-out"),f.removeClass(g.bgAnimate).addClass(g.bgAnimateOut||"alert-bg-anim-out"),b&&b.addClass("alert-front-in").removeClass("alert-back-in"),setTimeout(function(){d&&Exp.remove.call(d),Exp.remove.call(c),a.resetCallback&&a.resetCallback.call(a),"mini"!=this.type&&a.die(c),b&&b.removeClass("alert-back-in alert-front-in")},390),a.removeScrollerEvent(),a.asyncResetCallback&&a.asyncResetCallback.call(a)},50)}},removeScrollerEvent:function(){document.removeEventListener("touchmove",a),$(window).off("resize",this.setPosProxy)},die:function(){var a=this,b=a.el;$(b.querySelector(".btn-confirm")).off(a._event),"alert"!=a.type&&$(b.querySelector(".btn-cancel")).off(a._event)},get:function(a){var b=document.querySelectorAll(a);return b[b.length-1]}},function(a){return new b(a).init()}}(),stopper:function(a,b){b=b||1e3;var c;return function(){time=new Date,(!c||time-c>b)&&(a.call(this),c=time)}},registerListener:function(a,b,c,d){d||(d=c,c=void 0);var e=Exp.mobile,f={touchstart:{name:e?"touchstart":"mousedown",path:"touches"},touchmove:{name:e?"touchmove":"mousemove",path:"touches"},touchend:{name:e?"touchend":"mouseup",path:"changedTouches"},touchcancel:{name:e?"touchcancel":"mouseup",path:"touches"}},g=f[b],h=function(a){var b=a[g.path]?a[g.path][0]:a,c=this;return d?d.call(c,b,a):void 0},i=[g.name,c,h];c||i.slice(1,1),a.on.apply(a,i)},touchstart:function(a,b,c){this.registerListener(a,"touchstart",b,c)},touchmove:function(a,b,c){this.registerListener(a,"touchmove",b,c)},touchend:function(a,b,c){this.registerListener(a,"touchend",b,c)},touchcancel:function(a,b,c,d){this.registerListener(a,"touchcancel",b,c,d)},click:function(a,b,c,d){var e;"function"==typeof arguments[1]&&(d=c,c=b,b=void 0),this.touchstart(a,b,function(a){e={x:a.clientX,y:a.clientY}}),this.touchend(a,b,function(a){var b=this;if(e&&Math.abs(a.clientX-e.x)<=5&&Math.abs(a.clientY-e.y)<=5){if(c){if(d===!0)return c.call(b,a);"number"==typeof d?setTimeout(function(){c.call(b,a)},d):setTimeout(function(){c.call(b,a)},110)}e=null}}),this.touchcancel(a,b,function(a){e=null})},touch:function(a,b,c,d){var e;Exp.touchstart(a,function(c){var d=/translate3d\(([\d-+.]+)px?, ([\d-+.]+)px?, ([\d-+.]+)px?\)/gi.exec(Exp.css(a,"transform")),f=d?d[2]-0:0;return e={x:c.clientX,y:c.clientY,startY:f},b?b.call(a,c,e):void 0}),Exp.touchmove(a,function(b){if(e){var d={x:b.clientX,y:b.clientY,subX:b.clientX-e.x,subY:b.clientY-e.y};return c?c.call(a,b,d):void 0}}),Exp.touchend(a,function(b){if(e){var c={x:b.clientX,y:b.clientY,subX:b.clientX-e.clientX,subY:b.clientY-e.clientY};return e=null,d?d.call(a,b,c):void 0}})},page:function(a){var b,c,d='<div class="alert-box alert-page-box'+(a.rootClass?" "+a.rootClass:"")+'">',e="</div>",f=this,g={slideOut:function(a){return b=setTimeout(function(){},400),this.alertBox.slideOut(a),this},slideIn:function(a){return b&&(clearTimeout(b),b=0),this.alertBox.slideIn(a),this},remove:function(){return this.alertBox.reset(),this},hide:function(){return this.alertBox.el.style.display="none",this.alertBox.bg.style.display="none",this},show:function(){return this.alertBox.el.style.display="block",this.alertBox.bg.style.display="block",this},resize:function(){return c(),this},create:function(){return this.alertBox=f.alertBox({delayRender:!1,type:"custom",rootClass:a.rootClass,html:d+(a&&a.html?a.html:"")+e,transition:{position:a.position||"bottom",to:a.to||"200px"},resetCallback:a.resetCallback,asyncResetCallback:a.asyncResetCallback,bgClickReset:a.bgClickReset,scrollerClass:a.scrollerClass,background:a.background,setPos:function(){function b(){"%"==k[2]?j.to=("top bottom".indexOf(j.position)>-1?window.innerHeight:window.innerWidth)*(k[1]/100):j.to=k[1]-0;var b=j.position,c=0,d=0,f=window.innerWidth,g=window.innerHeight;"top"==b?(a.auto===!0?(g=e.height(),j.to=g):g=j.to,d=-j.to):"bottom"==b?(d=g,a.auto===!0?(g=e.height(),j.to=g):g=e.height()):"left"==b?(c=-j.to,a.auto===!0?(f=e.width(),j.to=f):f=j.to):"right"==b&&(c=window.innerWidth,a.auto===!0?(f=e.width(),j.to=f):f=j.to),e.css({top:d,left:c,height:g,width:f,opacity:0})}var d=this,e=$(this.el),h=$(this.bg),i=this.opts,j=i.transition,k=(j.to+"").match(/(\d+)(.*)/);f.position.scrollTop();this.addEvent=function(){},this.bgClickReset!==!1&&f.click(h,function(){d.slideOut()}),b(),c=b,this.slideIn=function(a){a=a||{};var b=j.position,c=0,d=0;"top"==b?d=a.to||j.to:"bottom"==b?d=-(a.to||j.to):"left"==b?c=a.to||j.to:"right"==b&&(c=-(a.to||j.to)),setTimeout(function(){e.addClass(a.slideAnimate||"page-slide-ani"),f.css(e,"transform","translate3d("+c+"px,"+d+"px,0px)"),e.css({opacity:1})},10)},this.slideOut=function(a){var b=this,c=this.opts;e.addClass(c.slideAnimate||"page-slide-ani"),h.addClass(c.bgAnimateOut||"alert-box-anim-out2").removeClass(c.bgAnimate||"alert-bg-anim");var d=j.position,i=0,k=0;return"top"==d?k=0:"bottom"==d?k=0:"left"==d?k=0:"right"==d&&(k=0),f.css(e,"transform","translate3d("+i+"px,"+k+"px,0px)"),a&&a.persistent===!0?void e.css("opacity",0):(g.remove(),void b.removeScrollerEvent())},this.reset=function(){h.css("opacity",0);var b=this,c=this.el,d=this.bg,e=this.opts;setTimeout(function(){e&&e.resetCallback&&e.resetCallback.call(b),d&&f.remove.call(d),f.remove.call(c)},a.slideTime||410),e&&e.asyncResetCallback&&e.asyncResetCallback.call(this)},a.resizeCallback&&a.resizeCallback.call(this)},animate:a.animate||"alert-page-anim",bgAnimate:a.bgAnimate||"alert-bg-anim",bgAnimateOut:"alert-bg-anim-out2",autoCancel:!0,callBack:a.alertCallBack||function(){}}),this}};return g.create(),g},lazier:function(a){"undefined"==typeof a&&(a={});var b=a.type||"class",c=a.property||"data-lasy",d=a.type||"data-lasytype",e=[],f=$(document.body);return{operate:function(a,b,c){switch(a){case"class":b.addClass(c);break;case"image":b.is("img")?b.attr("src",c):b.css("background-image",c)}},find:function(){var a=f.find("["+c+"]");e=[],a.each(function(a,f){var f=$(f),g=f.offset();e.push({el:f,value:f.attr(c),top:g.top,left:g.left,type:f.attr(d)||b}),f.removeAttr(c)})},scrolled:function(){var a=f.prop("scrollTop"),b=document.body.offsetHeight||document.body.clientHeight,c=a+b,d=this.operate;e=e.filter(function(b){return b.top>=a&&b.top<=c?(d(b.type,b.el,b.value),!1):!0})},start:function(){var a=this;window.addEventListener("scroll",function(){a.scrolled()},!1)}}},evalScale:function(){var a=$("[scale]");a.each(function(a,b){var c,d,e=$(this),f=$(this).attr("scale")||"1:1",g=f.split(":"),h=e.width()||g[0]||e.attr("width")||0,i=e.height()||g[1]||e.attr("height")||0,j=h,k=i;2==g.length&&(c=(g[0]||1)/(g[1]||1),d=i*c,h>d?j=d:k=h/c),e.width(j).height(k)})},scrolledAjax:function(a){function b(){if(F&&E.scrolled(),u&&C)g();else{if(t||!C)return;c()&&g()}}function c(){var a=document.documentElement,b=document.body,c=a.clientHeight||b.clientHeight,d=b.scrollTop||a.scrollTop,e=b.scrollHeight||a.scrollHeight;return c+d+x>e?!0:!1}function d(){var b=A.parent(),c=b.find(".scroll-loading"),d=0===c.length;a.loader!==!1&&(a.loader?i=a.loader:i||(i=$('<div class="scroll-loading"><span class="mb3 loading-flag"/>&nbsp;正在加载中...</div>'),d?i:i="",""!==i&&i.insertAfter(A),b.css("position","relative"),e(),j=Exp.createCanvasLoading(A)),i&&i.show())}function e(){i&&i.hide()}function f(){j&&(j.remove(),j=null)}function g(){if(!B){u=!1;var b=a,c=b.data;if(d(),c[n]=++w,z<c[n])return e(),f(),void--w;c[r]=k,c[q]=Math.ceil(w/k),c[o]=w+=k-1,c[s]=(new Date).getTime(),z<c[o]&&(c[o]=z),B=!0,$.ajax({url:b.url,type:b.type||"GET",data:c||{},dataType:"json",success:function(a){f(),h(a),Exp.clickActive(A),F&&(E.find(),E.scrolled())},error:function(){f(),v>0?(v--,w-=k,B=!1,g()):(B=!1,w-=k,e())}})}}function h(b){if(b){var d=[];if(z=b[m]>l?l:b[m]){var f=b[p];if(w==k&&(D.list=f||[]),f&&f.length>0)if(a.template){for(var h=0,i=f.length;i>h;h++){var j="string"==typeof a.template?a.template:"function"==typeof a.template?a.template(f[h],h):"",n=(f[h],Exp.HTMLTemplate({string:j,param:a.handleData?a.handleData(f[h],h):f[h]}));A[0].insertAdjacentHTML("beforeend",n);var q=A[0].lastElementChild;a.animate&&q.setAttribute("class",(q.getAttribute("class")||"")+" "+a.animate),d.push(q)}a.animate&&setTimeout(function(){for(var a=0,b=d.length;b>a;a++)d[a].style.opacity=1},10)}else{if(a.handleData)for(var h=0,i=f.length;i>h;h++)a.handleData(f[h],h);var j=template(a.templateId,b);A.append(j);var r=A.children(),s=r.size(),t=f.length;if(a.animate)for(;t--;)!function(b){var c=r.get(b);d.push(c),c.setAttribute("class",(c.getAttribute("class")||"")+" "+a.animate),setTimeout(function(){c.style.opacity=1},10)}(s-t-1)}if(a.success&&a.success(b,a,d),z<=a.data[o]){if(a.endCallback){var u=l&&l<b[m]&&w>=l;a.endCallback(a,u)}e()}}else if(a.zeroCallback)return e(),void a.zeroCallback(a,A,b)}B=!1,c()&&y!==!1&&g()}var i,j,k=a.steps||10,l=a.maxRecords||150,m=a.totalFlag||"total",n=a.startFlag||"startIndex",o=a.endFlag||"endIndex",p=a.recordsFlag||"list",q=a.pageIndex||"pageIndex",r=a.pageSize||"pageSize",s=a.timestamp||"timestamp",t=0,u=!0,v=3,w=0,x=150,y=a.autoGetData===!1?!1:!0,z=k,A=a.parent,B=!1,C=void 0===a.startFetch?!0:a.startFetch,D={list:[]},E=Exp.lazier(),F=a.lasyAnimate;return a.data=a.data||{},C&&y!==!1&&g(),y!==!1&&window.addEventListener("scroll",b,!1),{start:function(){C=!0,$(window).trigger("scroll")},close:function(){C=!1},getData:function(){g()},isLoadingData:function(){return B},clearLoading:function(){e()},destory:function(){window.removeEventListener("scroll",b),i&&i.remove(),this.pulldownRefresh&&this.pulldownRefresh.destory()},resetRemainTimes:function(){v=3,u=!0,z=k},abort:function(){this.ajaxObject&&this.ajaxObject.abort()},createPulldownRefresh:function(a){var b=a.element,c=a.pullDownArea||A,d=a.insertBeforeEl,e=a.endCallback,f=a.id,g=f?f.split(" "):[],h=0===A.find(".ui-pulldown-refresh").length;if(!b){var i='<div class="ui-pulldown-refresh"><div style="bottom:'+(a.bottom||0)+';"><i></i><span>下拉刷新</span></div></div>';h?i:i="",d=d||c,b=$(i).insertBefore(d)}var j=this;this.pulldownRefresh=Exp.pulldownRefresh({element:b,pullDownArea:c,insertBeforeEl:d,endCallback:function(a){j.abort(),j.update(g,a),e&&e()}})},update:function(b,c){function d(a,b,c){var d=c.length,e=a.length;if(e!=b.length)return!1;for(var f,g,h=0;e>h;h++){f=a[h],g=b[h];for(var i=0;d>i;i++)if(f[c[i]]!=g[c[i]])return!1}return!0}var e=D.list,f=a,g=f.data,i=b.length;if(e){var j={};j=$.extend(j,f.data||{}),j[n]=1,j[r]=k,j[q]=Math.ceil(1/k),j[o]=k,j.timestamp=(new Date).getTime(),this.ajaxObject=$.ajax({url:f.url,type:f.type||"GET",data:j||{},dataType:"json",success:function(a){var f=a[p]||[],j=e,l=f,m=!0;l?m=j&&i?d(l,j,b):!1:l!=j&&(m=!1),m?c.refreshNoData():(w=0,g[n]=++w,g[r]=k,g[q]=Math.ceil(w/k),g[o]=w+=k-1,A.empty(),c.hide(),h(a)),F&&setTimeout(function(){E.find(),E.scrolled()},500)}})}}}},sectionSlide:function(a,b,c,d){this.box=$(a),this.tabs=$(b),this.tabBg=$(c),this.contents=this.box.children(),this.tabBgMove=0,this.config=$.extend({},d||{}),this.width=this.config.width||this.box.width(),this.size=this.config.size||this.box.children().length,this.loop=this.config.loop||!1,this.auto=this.config.auto||!1,this.auto_wait_time=this.config.auto_wait_time||3e3,this.scrollTime=300,this.minleft=-this.width*(this.size-1),this.maxleft=0,this.nowLeft=0,this.pointX=null,this.startX=null,this.startY=null,this.index=this.config.index,this.touchSlide=this.config.touchSlide===!1?!1:!0,this.terminalFix=this.config.terminalFix||!1,this.busy=!1,this.timer,this.slope=.8;var e=this.tabs.find("li.on");"number"!=typeof this.index&&e.size()&&(this.index=this.tabs.find("li").index(e));var f=0;this.init=function(){var a=this.width;this.contents.width(a),this.bindEvent(),this.initWidth(),this.autoScroll(),this.index>0&&this.goIndex(this.index,!0),this.fixPage(this.index)},this.initWidth=function(){this.box.css("width",this.width*this.size),this.tabBg.css("width",1/this.size*100+"%")},this.bindEvent=function(){var a,b,c=this,d=!0;Exp.click(c.tabs.children(),function(){if(!c.busy){var a=$(this).index();c.tabsClick(a)}}),0!=c.touchSlide&&Exp.touch(c.box,function(b){c.busy||(c.startX=c.pointX=b.screenX,c.startY=c.pointY=b.screenY,isFirst=!0,d=!0,a={x:b.screenX,y:b.screenY})},function(e){if(!c.busy){if(!d)return!1;var f=c.move(e.screenX,e.screenY);if(isFirst&&(isFirst=!1,b=f),b!==f)return d=!1,!1;if(a={x:e.screenX,y:e.screenY},!f)return f}},function(b){f=0,d?!c.busy&&c.movEnd(b.screenX,b.screenY):!c.busy&&c.movEnd(a.x,a.y)})},this.autoScroll=function(){var a=this;a.loop&&a.auto&&(clearTimeout(a.timer),a.timer=setTimeout(function(){a.goIndex((a.index+1)%a.size)},a.auto_wait_time))},this.tabsClick=function(a){var b=this,c=(b.tabs.width()/this.contents.size(),b.tabs.children());c.get(a);b.tabBgMove=c.eq(a).position().left,b.busy||(clearTimeout(b.timer),b.goIndex(a))},this.goIndex=function(a,b){var c=this,d=(c.nowLeft,c.width),e=c.size,f=b||!1,g=c.tabs.children();g.get(a);c.busy=!0,0>a?a=0:a>=e&&(a=e-1),-1==a||a==e?(c.index=-1==a?e-1:0,c.nowLeft=-1==a?0:-d*(e+1)):(c.index!=a&&(f=!0),c.index=a,c.nowLeft=-(d*a)),c.tabsClick(a),c.tabBg.css(this.getStyle(1)[1]),g.removeClass("on").eq(a).addClass("on"),c.box.css(this.getStyle(1)[0]),setTimeout(function(){c.complete(a,f)},5)},this.complete=function(a,b){var c=this;c.busy=!1,c.fixPage(a),c.autoScroll(),0!=b&&c.config.callback&&c.config.callback(c.index)},this.fixPage=function(a){var b=this;if(b.config.pageFixed){b.index!=a&&window.scrollTo(0,0);var c=document.documentElement.clientHeight+(b.config.pageFixedPx||0);this.contents.each(function(b,d){var d=$(d);b==a?d.css("max-height",""):d.css("max-height",c)})}},this.next=function(){this.busy||this.goIndex(this.index+1)},this.prev=function(){this.busy||this.goIndex(this.index-1)},this.move=function(a,b){var c=this,d=c.tabs.children(),e=(d.get(c.index),a-(null===this.pointX?a:this.pointX)),f=(b-(null===this.pointY?b:this.pointY),Math.abs(a-this.startX)*c.slope<=Math.abs(b-this.startY));if(f)return this.preventDefault=!0,!0;if(c.terminalFix){if(0==c.index&&e>0)return this.preventDefault=!0,!0;if(c.index==c.size-1&&0>e)return this.preventDefault=!0,!0}return this.nowLeft=this.nowLeft+e,this.pointX=a,this.box.css(this.getStyle(2)[0]),this.tabBgMove=this.tabBgMove-e/this.width*this.tabBg.width(),d.removeClass("on").eq(c.index).addClass("on"),this.preventDefault=!1,!1},this.movEnd=function(a,b){var c=this.nowLeft=a-(null===this.startX?a:this.startX);if(this.preventDefault===!0)index=this.index;else{if(0===c)return;-70>c?index=this.index+1:c>70?index=this.index-1:index=this.index}this.pointX=null,this.goIndex(index)},this.getStyle=function(a){var b=this,c=b.nowLeft,d=1==a?b.scrollTime:0,e=b.tabBgMove;return[{"-webkit-transition":"-webkit-transform "+d+"ms","-webkit-transform":"translateX("+c+"px)","-webkit-backface-visibility":"hidden",transition:"transform "+d+"ms",transform:"translateX("+c+"px)"},{"-webkit-transition":"-webkit-transform "+d+"ms","-webkit-transform":"translateX("+e+"px)","-webkit-backface-visibility":"hidden",transition:"transform "+d+"ms",transform:"translateX("+e+"px)"}]},this.init()},speedCounter:function(a){var b=a&&a.rate||.3,c=(a&&a.countRecord||3,[]);return{start:function(a){c=[],c.push({time:new Date,x:a.screenX,y:a.screenY})},update:function(a){c.push({time:new Date,x:a.screenX,y:a.screenY})},getValue:function(a){var d=c.length,e=c[--d],f=c[--d],g=0;if(speedY=0,e&&f){var h=e.x-f.x,i=e.y-f.y,j=Math.abs(f.time-e.time);g=h*b*1e3/j,speedY=i*b*1e3/j}return{x:g,y:speedY}},getValueFromBeginToEnd:function(a){var b=c.length,d=c[--b],e=c[0],f=0;if(speedY=0,d&&e){var g=d.x-e.x,h=d.y-e.y;f=g,speedY=h}return{x:f,y:speedY}}}},limitor:function(a,b){return{getValue:function(c){return a>c?a:c>b?b:c}}},menuSlide:function(a,b,c){el=$(a);var d=el.children(),e=window.innerWidth;e>640&&(e=640);var f=e-el.width();f>0&&(f=0);var g,h,i=0,j=this.speedCounter(),k=this.limitor(f,0),l=el.find("."+c);l.length?(i=el.children().eq(0).offset().left-l.offset().left,i=k.getValue(i),el.css("-webkit-transform","translateX("+i+"px)")):el.children().eq(0).addClass(c),Exp.touchstart(el,function(a,c){g=a.screenX;var d=/\((?:[\s,]*([-\d\.]+)[px\s]*)?(?:[\s,]*([-\d\.]+)[px\s]*)?(?:[\s,]*([-\d\.]+)[px\s]*)?/g,e=d.exec(el.css("-webkit-transform"));return h=parseFloat(e&&e[1]||0),el.css("-webkit-transform","translateX("+h+"px)"),el.removeClass(b),j.start(a),!1}),Exp.touchmove(el,function(a){i=h+a.screenX-g,i=k.getValue(i),el.css("-webkit-transform","translateX("+i+"px)"),j.update(a)}),Exp.touchend(el,function(a){el.addClass(b),i+=j.getValue().x,i=k.getValue(i),el.css("-webkit-transform","translateX("+i+"px)")}),Exp.click(d,function(){el.addClass(b);var a=el.find("."+c).index(),d=$(this).index();$(this).addClass(c).siblings().removeClass(c),d!=a&&(d>a?i-=$(this).width():i+=$(this).width(),i=k.getValue(i),el.css("-webkit-transform","translateX("+i+"px)"))})},bottomMenu:function(a,b,c,d){function e(a){h&&clearTimeout(h),f(),h=setTimeout(g,j)}function f(){k&&(k=!1,i.removeClass(b),k=!1)}function g(){k||(k=!0,m=!1,i.addClass(b),k=!0)}var h,i=$(a),j=c,k=!0;window.addEventListener("scroll",function(){e()});var l=$(d),m=!1;Exp.touchstart(l,function(){m=!0,e()}),Exp.touchmove(l,function(){m&&e()}),Exp.touchend(l,function(){m=!1})},inputTrim:function(a){function b(){return a.element.val()||a.element.text()}function c(a,b){if(a.setSelectionRange)a.focus(),a.setSelectionRange(b,b);else if(a.createTextRange){var c=a.createTextRange();c.collapse(!0),c.moveEnd("character",b),c.moveStart("character",b),c.select()}}function d(a){var b=0;if(document.selection){a.focus();var c=document.selection.createRange();c.moveStart("character",-a.value.length),b=c.text.length}else(a.selectionStart||"0"==a.selectionStart)&&(b=a.selectionStart);return b}function e(){var e=a.element,f=b(),g=a.tip,h=a.trimReg;if(g==f&&(f=""),h){var i=f.match(h),j=i?i.join(""):"";if(i=j.match(h),j=i?i[0]:"",j!=f){var k=d(e[0]);e.val(j),c(e[0],k-1)}}}a.element.on("input",function(){e()})},pulldownRefresh:function(a){function b(){p.css({height:"0"})}function c(){p.css({"-webkit-transition":"height 0.4s ease"})}function d(){p.css({"-webkit-transition":""})}function e(){p.find("span").html("已是最新数据"),p.find("i").addClass("ui-hide"),setTimeout(function(){b(),p.css({"-webkit-transition":"height 0.5s liner"})},1e3)}var f,g,h,i,j,k,l,m,n,o=a.insertBeforeEl,p=a.element,q=!1,r=a.noDie,s=0,t=0;return Exp.touchstart(o,function(a){q||(i=a.screenX,f=a.screenY,m=$(window).scrollTop(),$(".zc-title .title-list").css("opacity",0).hide(),n=$("body").height(),d())}),Exp.touchmove(o,function(a){if(!(q||m>0)){if(l=a.screenX,g=a.screenY,s=l-i,t=g-f,j=0>s?-s:s,k=0>t?-t:t,2*j>k)return!0;var b=80,c=50;if(!(0>t))return p.find("i").removeClass("load"),0==m?(h=t/n*t,h=h>b?b:h,p.find("i").removeClass("ui-hide"),h>c&&b>=h?(p.find("span").html("释放立即刷新"),p.find("i").addClass("up")):(p.find("span").html("下拉刷新"),p.find("i").removeClass("up")),p.css({height:h+"px"}),!1):void 0}}),Exp.touchend(o,function(d){if(!q){if(j>k)return!0;var f=document.body.scrollTop;if(p.find("i").hasClass("load")&&0>f&&(p.find("i").removeClass("load"),a.stopStaut=!0,a.endCallback(a),f>40&&(document.body.scrollTop=0),b()),(0>t||0!==f)&&p.find("i").hasClass("load"))return!1;t>0&&(a.endCallback&&p.find("i").hasClass("up")?(a.stopStaut=!1,a.hide=b,a.refreshNoData=e,a.endCallback(a),p.find("span").html("正在加载中..."),p.find("i").addClass("load"),p.css({height:"36px"})):b()),c(),s=0,t=0}}),{destory:function(){r||p.remove(),q=!0}}},logger:function(a){for(var b="",c=0;c<arguments.length;c++)b+="-----"+arguments[c];$.ajax({url:"data/logger.json"+b+"-------------------------",type:"get",dataType:"json",data:{},success:function(){}})},clickActive:function(a){function b(a){for(var b="";"html"!=a[0].tagName.toLowerCase()&&(b=a.css("background-color"),"rgba(0, 0, 0, 0)"==b||"transparent"==b);)a=a.parent();return b}function c(a){for(var b,c=a.match(/\d+/gi),d="rgb(",e=0;3>e;e++)b=Math.ceil(c[e]-(256-c[e])/8-21),b=0>b?0:b,d+=b,2!=e&&(d+=",");return d+=")"}a||(a=$(document.body));var d=this;a.find("[data-clickactive]").each(function(a,e){function f(){l?(e.css("background-color",n),e.addClass("click-active")):(e.css("background-color",""),e.removeClass("click-active"))}var g,h,i,j,k,e=$(e),l=!1,m=100,n=e.data("clickactive")||c(b(e)),o=e.data("href");"change"==n&&(i=!0),e.removeAttr("data-clickactive").removeAttr("data-href"),d.touchstart(e,function(a){return h&&clearInterval(h),a.target&&$(a.target).is("[data-clickforbidden]")?void(k=!0):(k=!1,void(i&&(j=e.is("[data-clickforbidden]"))||(g={x:a.clientX,y:a.clientY},l=!0,h=setInterval(f,m),i&&(n=c(b(e))))))}),d.touchmove(e,function(a){i&&j||k||(l=!1,clearInterval(h),f())}),d.touchend(e,function(a){
if(!(i&&j||k)){if(g){var b=a.clientX,c=a.clientY;Math.abs(g.x-b)<=5&&Math.abs(g.y-c)<=5?(f(),l=!1,setTimeout(f,m),o&&setTimeout(function(){window.location.href=o},m+340)):(l=!1,f()),clearInterval(h)}g=null,l=!1}}),e.on("touchcancel",function(a){l=!1})})},createLoading:function(a){var b='<div class="loading loading-animate"></div><span>'+(a||"加载中...")+"</span>",c=Exp.alertBox({type:"validate",msg:b,callBack:function(){}});return{reset:function(){c.reset()}}},createCanvasLoading:function(a,b){if(!b)var b="加载中...";a=a||$(document.body);var c=(height=36,a.parent()),d=$('<div class="exploading"><div class="sn-loading"></div><div class="intro">'+b+"</div></div>");d.insertAfter(a);var e=Exp.position.scrollTop(),f=c.offset();d.css({top:(window.innerHeight-d.height())/2+e-f.top,left:(f.width-d.width())/2,opacity:1});var g=0,h=d.find(".sn-loading"),i=setInterval(function(){g+=152,g>3e3&&(g=0),h.css("background-position-x",-g+"px")},60);return{remove:function(){i&&clearInterval(i),d.remove()}}},showAlert:function(a,b,c){if("number"==typeof b){var d=c;c=b,b=d}Exp.alertBox({type:"validate",msg:a,callBack:function(){var a=this;setTimeout(function(){a.reset(),b&&b()},c||2e3)}})},openPopWindow:function(a,b,c,d,e){"function"==typeof b&&(e=d,d=c,c=b,b={}),e=e||{};var f='<div class="alert-box pop-window'+(e.rootClass?" "+e.rootClass:"")+'">',g="</div>";return Exp.alertBox({type:"custom",html:f+template.compile("string"==typeof a?a:a.html())(b)+g,contextAnimate:e.contextAnimate||!1,animate:e.animate||"alert-box-anim",bgAnimate:e.bgAnimate||"alert-bg-anim",animateOut:"alert-box-anim-out2",bgAnimateOut:"alert-bg-anim-out2",bgClickReset:e.bgClickReset,upOffset:e.upOffset,resetCallback:e.resetCallback,asyncResetCallback:e.asyncResetCallback,scrollerClass:e.scrollerClass,callBack:function(){var a=$(this.el),b=($(this.bg),this);e.callback&&e.callback.call(b),Exp.clickActive(),Exp.click(a.find(".close"),function(){var a;d&&(a=d()),a!==!1&&b.reset()}),Exp.click(a.find(".confirm"),function(){var a;c&&(a=c()),a!==!1&&b.reset()})}})},init:function(){this.clickActive()}};return Exp.click($(document.body),function(){}),Exp.init(),Exp}($,template);